# HTTP Proxy Course - Образовательная система

## Описание проекта

Образовательная система «HTTP proxy» - это десктопное приложение на Qt для изучения основ HTTP-прокси серверов. Система поддерживает два режима работы: студенческий (изучение теории и прохождение тестов) и административный (редактирование контента и просмотр аналитики).

## Технические характеристики

- **Язык программирования:** C++17
- **GUI Framework:** Qt 5.15+ / Qt 6.x
- **База данных:** PostgreSQL
- **Архитектура:** MVC (Model-View-Controller)
- **Хранение данных:** Гибридное (PostgreSQL + бинарные файлы)

## Архитектура системы

### Слои приложения
- **Model (Модель):** `DomainTypes.h` - структуры данных
- **View (Представление):** Widget классы (`LoginWidget`, `TestWidget`, `AdminWidget`, etc.)
- **Controller (Контроллер):** Service классы (`AuthService`, `DatabaseManager`, `SessionManager`)

### Компоненты
- **DatabaseManager** - Singleton для работы с PostgreSQL
- **AuthService** - Аутентификация и авторизация пользователей
- **Serializer** - Сериализация/десериализация бинарных данных
- **Logger** - Система логирования
- **DatabaseConfig** - Управление конфигурацией БД

## Установка и настройка

### Требования
- Qt 5.15+ или Qt 6.x
- PostgreSQL 12+
- C++17 совместимый компилятор
- Qt Creator (рекомендуется)

### Настройка базы данных
1. Установите PostgreSQL
2. Создайте базу данных `proxy_course`
3. Скопируйте `config.ini.example` в `config.ini`
4. Отредактируйте параметры подключения в `config.ini`

### Сборка проекта
```bash
cd HttpProxyCourse
qmake HttpProxyCourse.pro
make
```

## Структура базы данных

### Таблица `users`
- `id` (SERIAL PRIMARY KEY)
- `login` (VARCHAR UNIQUE) - логин пользователя
- `password_hash` (VARCHAR) - SHA-256 хеш пароля
- `full_name` (VARCHAR) - полное имя
- `role` (VARCHAR) - роль ('student' или 'admin')

### Таблица `progress`
- `user_id` (INTEGER) - ID пользователя
- `last_topic_id` (INTEGER) - последняя изученная тема
- `updated_at` (TIMESTAMP) - время обновления

### Таблица `test_results`
- `id` (SERIAL PRIMARY KEY)
- `user_id` (INTEGER) - ID пользователя
- `test_date` (TIMESTAMP) - дата прохождения теста
- `score` (INTEGER) - набранные баллы
- `max_score` (INTEGER) - максимальные баллы

## Безопасность

### Реализованные меры
- SHA-256 хеширование паролей
- Параметризованные SQL запросы (защита от SQL injection)
- XOR шифрование бинарных файлов
- Валидация пользовательского ввода
- Проверка прав доступа для административных функций

### Конфигурация
- Пароли БД хранятся в `config.ini` (исключен из git)
- Логи записываются в `application.log`
- Бинарные файлы курса шифруются

## Режимы работы

### Студенческий режим
- **Теория:** Просмотр материалов в `QTextBrowser`
- **Тесты:** Интерактивные тесты с таймером и подсчетом очков
- **Прогресс:** Автоматическое сохранение прогресса в БД
- **Статистика:** Просмотр личных результатов

### Административный режим
- **Редактор тестов:** Создание и редактирование вопросов
- **Сохранение:** Экспорт в бинарный формат
- **Аналитика:** Просмотр статистики всех пользователей
- **Фильтрация:** `QSortFilterProxyModel` для поиска и сортировки

## Файловая структура

```
HttpProxyCourse/
├── HttpProxyCourse/           # Исходный код
│   ├── *.h, *.cpp            # Файлы классов
│   ├── HttpProxyCourse.pro   # Файл проекта Qt
│   └── mainwindow.ui         # UI файл
├── config.ini.example        # Пример конфигурации
├── .gitignore               # Исключения для git
└── README.md                # Этот файл
```

## Логирование

Система использует собственный класс `Logger` для структурированного логирования:

```cpp
Logger::info("Сообщение", "Категория");
Logger::warning("Предупреждение", "Auth");
Logger::error("Ошибка", "Database");
```

Логи записываются в консоль и файл `application.log`.

## Разработка

### Стиль кодирования
- Документация на русском языке
- Doxygen формат для комментариев
- Использование новой синтаксиса Signal/Slot
- Строгое соблюдение Qt parent-child иерархии

### Валидация ввода
- `QRegularExpressionValidator` для полей ввода
- Проверка силы паролей
- Валидация логинов (только латинские символы, цифры, подчеркивание)

## Известные ограничения

- XOR шифрование с константным ключом (подходит для учебных целей)
- Простые правила валидации паролей
- Отсутствие ограничений на количество попыток входа

## Лицензия

Учебный проект. Все права защищены.

## Контакты

Для вопросов по проекту обращайтесь к разработчикам.